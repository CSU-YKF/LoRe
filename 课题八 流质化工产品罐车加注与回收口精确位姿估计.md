## **课题八** **流质化工产品罐车加注与回收口精确位姿估计**

**1、** **设计内容**

为了实现化工生产中各种工业产品的完全自动化**加注**，需要首先对流质化工产品（如酒精、乙二醇等醇类、苯类、甲烷、丙烷、LNG等天然气液体）的主要**运输载体**——运输化工液体槽罐**车**的**加注与回收口**的**位姿**进行精确估计，进而实现后续的机械臂路径规划等自动化加注流程。本课题以RGBD相机为主要传感器，设计内容为针对**不同类型**的罐车加注口与回收口布局类型，设计鲁棒性较强的程序实现**加注口与回收口的精确位姿**（包含**圆面中心点3维坐标**和**圆面法向量**）。

**2、** **材料准备**

1)语言：不限，推荐Python/C++

2)点云数据及其他文件。

下载链接1夸克网盘：https://pan.quark.cn/s/7acc8c5888ea

提取码1：iY9f

下载链接2百度网盘：https://pan.baidu.com/s/1nWuF0s3lsikn_iInyD9ncg?pwd=2101

提取码2：2101

3)开源点云编辑软件CloudCompare

4)设计方案可能用到的三方库和方法，供参考无硬性要求：

[开源三方库Point Cloud Library配置](https://blog.csdn.net/qq_42676511/article/details/126054136)

[Filters模块空间裁剪器类](https://blog.csdn.net/qq_41921826/article/details/130724221)

[PCL求解规则点云的拟合圆](https://blog.csdn.net/Candyerer/article/details/109538704?spm=1001.2014.3001.5506)

[点云配准方法SAC-IA、ICP](https://blog.csdn.net/peach_blossom/article/details/78506184)

[RANSAC拟合模型](https://pointclouds.org/documentation/classpcl_1_1_sample_consensus_model.html)

**3、** **设计要求**

1） 针对数据集中不同的场景，以各自点云文件或2D图像为输入，输出对应场景的加注口和回收口圆心坐标及法向量，要求圆心各轴坐标误差不超过20mm，法向量俯仰角、偏航角与实际偏差不超过5°；

2） 需要特别注意的是实车数据集的10个场景各自的加注口和回收口的接口部分规格完全一致，但其深浅和相对位置是不固定的，只能确定左右关系，因此需要在设计程序之初就考虑到整体流程的鲁棒性，进而使其能够适应更多不同的两口分布、处理更多种类的槽罐车数据。

3） 考虑到自动化加注的时效性，程序总处理时长不超过60s；

4） 学有余力可以考虑将圆心和法向量的结果进行可视化展示（如visual1.png、visual2.png所示）以及进一步提高坐标和法向量的精确度；

**4、** **数据格式说明**

任意选取特定场景，使用数据集中该场景下任何可利用的数据类型作为输入，输出格式不作要求，只需输出该场景下的**相机点云坐标系**下的加注口与回收口的圆心3维坐标和圆面法向量结果并截图验证（验证方法可参考val1.png、val2.png）结果的准确性。

数据集包含内容说明如下：

1） “实验箱2D图像及对应点云”文件夹包含**9组**由RGBD相机采集的**实验箱不同角度**的加注回收口二维图像和点云文件，可用于程序输入获取其两圆中心坐标及法向量；

2） “实车点云”文件夹包含ICP_input0.pcd、ICP_input1.pcd、……、ICP_input9.pcd，为**真实槽罐车**实地采集的原始输入点云文件，不同于“2D图像及对应点云”文件夹，这10个pcd文件不包含对应的2D图像数据，如果选择的方案需要用到2D图像可不考虑该类数据作为输入；

3） source.pcd为可用于**配准**的加注回收口标准模板点云文件，sor_pass_ly.pcd和sor_pass_ry.pcd分别为回收口（左、小圆）和加注口（右、大圆）模板点云文件；

4） coordinates.txt为3）中**模板文件**加注回收口的相机点云坐标系下的**3D坐标**，第一行为回收口，第二行为加注口；

5） visual1.png、visual2.png为圆心和法向量估计结果的可视化展示示例；

6） val1.png、val2.png为结果验证方法，图中软件为CloudCompare，该验证方法仅供参考，非硬性要求，如有其他更好的验证方法也可以使用。

**5、** **报告要求**

提交纸质版课程报告一份，包括内容有：方案论述，框架设计，程序设计，测试方案与测试结果等。

电子版材料：录制演示视频，在汇报中展示。

上交材料：(1)课程设计报告；(2)系统程序及运行说明文件；(3)自己认为必要的辅助材料。